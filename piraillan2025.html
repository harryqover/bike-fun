<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guide de Vacances | Cap Ferret 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Chosen Palette: Cap Ferret Dune -->
    <!-- Application Structure Plan: J'ai con√ßu une application √† onglets (Aujourd'hui, La Villa, Plages, Activit√©s, Vie Pratique, Mar√©es) pour une navigation rapide et th√©matique. Cette structure est plus fonctionnelle qu'un rapport lin√©aire pour un usage mobile en vacances. L'onglet "Aujourd'hui" sert de tableau de bord dynamique, offrant les informations les plus pertinentes (mar√©es du jour) d√®s l'ouverture. L'onglet "La Villa" centralise les informations pratiques sur le logement. Cette approche est orient√©e vers les t√¢ches de l'utilisateur (que faire aujourd'hui, o√π se baigner, infos sur la maison), rendant l'information imm√©diatement exploitable. -->
    <!-- Visualization & Content Choices: 
        - Mar√©es -> Objectif: Montrer l'√©volution -> Viz: Tableau HTML pour les d√©tails + Graphique en ligne Chart.js pour la tendance visuelle -> Interaction: Survol des points du graphique -> Justification: Le graphique rend le concept abstrait mais crucial des mar√©es intuitif et facile √† planifier.
        - Plages -> Objectif: Comparer et choisir -> Viz: Cartes interactives HTML/CSS -> Interaction: Boutons pour filtrer par type (Bassin/Oc√©an) -> Justification: Simplifie la d√©cision en fonction du besoin de l'utilisateur (s√©curit√© des enfants vs. vagues).
        - Activit√©s & Commerces -> Objectif: Informer et organiser -> Viz: Cartes et listes structur√©es en HTML/CSS -> Justification: Pr√©sentation claire et scannable pour une consultation rapide.
        - Villa -> Objectif: Centraliser les infos du logement -> Viz: Cartes et listes structur√©es HTML/CSS avec ic√¥nes -> Justification: Acc√®s rapide aux d√©tails pratiques (adresse, √©quipements, r√®gles).
        - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            background-color: #F5F5F4; /* stone-100 */
            font-family: 'Inter', sans-serif;
        }
        .nav-link {
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        .nav-link.active {
            border-bottom-color: #0F766E; /* teal-700 */
            color: #134E4A; /* teal-900 */
            font-weight: 600;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 250px;
            max-height: 300px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
                max-height: 400px;
            }
        }
    </style>
</head>
<body class="text-stone-800">

    <div class="container mx-auto p-4 md:p-6 max-w-7xl">

        <header class="text-center mb-6">
            <h1 class="text-3xl md:text-4xl font-bold text-teal-900">Vos Vacances au Cap Ferret</h1>
            <p class="text-stone-600 mt-1">20 - 27 Juillet 2025 | Piraillan</p>
        </header>

        <nav class="flex justify-center flex-wrap gap-x-4 gap-y-2 md:gap-x-8 border-b border-stone-300 pb-2 mb-8">
            <button class="nav-link text-stone-600 hover:text-teal-800 px-1 py-2 text-sm md:text-base" data-tab="today">Aujourd'hui</button>
            <button class="nav-link text-stone-600 hover:text-teal-800 px-1 py-2 text-sm md:text-base" data-tab="villa">La Villa</button>
            <button class="nav-link text-stone-600 hover:text-teal-800 px-1 py-2 text-sm md:text-base" data-tab="beaches">Les Plages</button>
            <button class="nav-link text-stone-600 hover:text-teal-800 px-1 py-2 text-sm md:text-base" data-tab="activities">Activit√©s</button>
            <button class="nav-link text-stone-600 hover:text-teal-800 px-1 py-2 text-sm md:text-base" data-tab="practical">Vie Pratique</button>
            <button class="nav-link text-stone-600 hover:text-teal-800 px-1 py-2 text-sm md:text-base" data-tab="tides">Agenda des Mar√©es</button>
        </nav>

        <main>
            <section id="today" class="content-section">
                <div class="bg-white p-6 rounded-lg shadow-lg border border-stone-200">
                    <h2 class="text-2xl font-bold text-teal-800 mb-4 text-center">Plan du Jour</h2>
                    <div id="today-info" class="text-center"></div>
                </div>
            </section>
            
            <section id="villa" class="content-section">
                 <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold text-teal-800 mb-2">Votre Havre de Paix</h2>
                    <p class="text-stone-600 max-w-2xl mx-auto">Toutes les informations sur votre maison de vacances. Un lieu pens√© pour le confort de toute la famille.</p>
                </div>
                <div id="villa-grid" class="grid grid-cols-1 lg:grid-cols-2 gap-8"></div>
            </section>

            <section id="beaches" class="content-section">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold text-teal-800 mb-2">L'Appel de l'Eau</h2>
                    <p class="text-stone-600 max-w-2xl mx-auto">Choisissez votre rivage : la qui√©tude du Bassin pour les enfants, ou la majest√© de l'Oc√©an pour les plus grands. N'oubliez pas : la baignade √† l'oc√©an se fait uniquement entre les drapeaux.</p>
                     <div class="mt-4 flex justify-center gap-2">
                        <button onclick="filterBeaches('all')" class="beach-filter-btn active bg-teal-600 text-white px-4 py-2 rounded-full text-sm">Toutes</button>
                        <button onclick="filterBeaches('bassin')" class="beach-filter-btn bg-white text-teal-600 px-4 py-2 rounded-full text-sm border border-teal-600">Bassin</button>
                        <button onclick="filterBeaches('ocean')" class="beach-filter-btn bg-white text-teal-600 px-4 py-2 rounded-full text-sm border border-teal-600">Oc√©an</button>
                    </div>
                </div>
                <div id="beaches-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </section>

            <section id="activities" class="content-section">
                 <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold text-teal-800 mb-2">Activit√©s & D√©couvertes</h2>
                    <p class="text-stone-600 max-w-2xl mx-auto">Des d√©gustations d'hu√Ætres les pieds dans l'eau aux excursions embl√©matiques, plongez au c≈ìur de la vie de la presqu'√Æle.</p>
                </div>
                <div id="activities-grid" class="grid grid-cols-1 md:grid-cols-2 gap-8"></div>
            </section>

            <section id="practical" class="content-section">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold text-teal-800 mb-2">Vie Pratique √† Piraillan</h2>
                    <p class="text-stone-600 max-w-2xl mx-auto">Toutes les adresses essentielles pour organiser le quotidien de la tribu, des courses aux plaisirs gourmands.</p>
                </div>
                <div id="practical-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </section>

            <section id="tides" class="content-section">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold text-teal-800 mb-2">Le Rythme des Mar√©es</h2>
                    <p class="text-stone-600 max-w-2xl mx-auto">L'outil indispensable pour planifier vos journ√©es. Les activit√©s c√¥t√© Bassin d√©pendent enti√®rement des mar√©es. Profitez des pleines mers de l'apr√®s-midi pour des baignades id√©ales !</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-lg border border-stone-200 mb-8">
                     <div class="chart-container">
                        <canvas id="tidesChart"></canvas>
                    </div>
                </div>
                <div class="overflow-x-auto bg-white p-4 rounded-lg shadow-lg border border-stone-200">
                    <table class="w-full text-sm text-left text-stone-600">
                        <thead class="text-xs text-teal-800 uppercase bg-stone-50">
                            <tr>
                                <th scope="col" class="px-4 py-3">Date</th>
                                <th scope="col" class="px-4 py-3 text-center">Pleine Mer (Matin)</th>
                                <th scope="col" class="px-4 py-3 text-center">Pleine Mer (Soir)</th>
                                <th scope="col" class="px-4 py-3 text-center">Coeff.</th>
                                <th scope="col" class="px-4 py-3">Conseil du Jour</th>
                            </tr>
                        </thead>
                        <tbody id="tides-table-body">
                        </tbody>
                    </table>
                </div>
            </section>
        </main>

    </div>

    <script>
        const appData = {
            villa: {
                address: "64, avenue de Bellevue, Piraillan ‚Äì 33950 L√®ge-Cap-Ferret",
                contact: { name: "Yvan Sibadey", phone: "06 08 46 85 10" },
                description: "Villa de 200m¬≤ dans une impasse calme, expos√©e plein sud. Comprend 6 chambres, 2 dortoirs, 5 salles d'eau pour 22 couchages. Draps, serviettes et linge de maison fournis. Piscine chauff√©e.",
                rules: [
                    "Arriv√©e autonome avec une bo√Æte √† cl√© s√©curis√©e.",
                    "Caution de 2000‚Ç¨ via une empreinte bancaire Swikly (√† faire la veille de l'arriv√©e).",
                    "Respecter la qui√©tude du voisinage. La villa est un lieu de vill√©giature et non de f√™tes."
                ],
                amenities: {
                    "Cuisine & Salle √† Manger": ["Bouilloire", "Cafeti√®re", "Cong√©lateur", "Four", "Micro-ondes", "Grille-pain", "Lave-vaisselle", "R√©frig√©rateur", "Plaque de cuisson", "Ustensiles de barbecue", "Vaisselle", "Verres √† vin", "Chaise haute", "D√©tecteur de fum√©e", "Extincteur"],
                    "Chambre & Linge": ["Lave-linge", "S√®che-linge", "Serviettes, draps, savon, papier toilette", "Cintres", "Oreillers et couvertures suppl√©mentaires", "Fer √† repasser"],
                    "Pour la Famille": ["Lit pour b√©b√© (sur demande)", "Livres et jouets pour enfants", "Baignoire pour b√©b√©s (sur demande)", "Vaisselle pour enfants", "Table √† langer (sur demande)", "Recommandations de baby-sitters"],
                    "Ext√©rieur & Loisirs": ["Piscine chauff√©e & Jacuzzi", "Barbecue", "Mobilier d'ext√©rieur", "Hamac", "Chaises longues", "Table de ping-pong", "Parking gratuit (sur place et dans la rue)", "Wi-Fi", "Syst√®me audio"]
                }
            },
            tides: [
                { date: "Dim 20 Juil.", dayIndex: 0, pmMatin: "01:15 (3.46m)", pmSoir: "13:54 (3.41m)", coeff: "52", conseil: "Mar√©es douces. Pleine mer en d√©but d'apr√®s-midi, parfaite pour une premi√®re baignade tranquille." },
                { date: "Lun 21 Juil.", dayIndex: 1, pmMatin: "02:32 (3.46m)", pmSoir: "15:05 (3.55m)", coeff: "56-59", conseil: "Pleine mer en milieu d'apr√®s-midi. Id√©al apr√®s la sieste des petits." },
                { date: "Mar 22 Juil.", dayIndex: 2, pmMatin: "03:43 (3.54m)", pmSoir: "16:08 (3.72m)", coeff: "64-69", conseil: "Les mar√©es se renforcent. Belle lumi√®re dor√©e pour une longue session sur le sable." },
                { date: "Mer 23 Juil.", dayIndex: 3, pmMatin: "04:44 (3.66m)", pmSoir: "17:04 (3.89m)", coeff: "73-78", conseil: "Excellentes conditions. Envisagez un pique-nique pour le d√Æner sur la plage." },
                { date: "Jeu 24 Juil.", dayIndex: 4, pmMatin: "05:55 (3.93m)", pmSoir: "18:15 (4.20m)", coeff: "82-85", conseil: "Tr√®s fortes mar√©es. La pleine mer du soir sera spectaculaire." },
                { date: "Ven 25 Juil.", dayIndex: 5, pmMatin: "06:43 (4.04m)", pmSoir: "19:02 (4.30m)", coeff: "87-89", conseil: "Pic des mar√©es ! L'eau sera √† son plus haut et plus clair. Jour parfait pour la Pointe aux Chevaux." },
                { date: "Sam 26 Juil.", dayIndex: 6, pmMatin: "07:27 (4.07m)", pmSoir: "19:45 (4.32m)", coeff: "89", conseil: "Encore des mar√©es exceptionnelles. Id√©al pour une d√©gustation d'hu√Ætres au coucher du soleil." },
                { date: "Dim 27 Juil.", dayIndex: 7, pmMatin: "08:07 (4.04m)", pmSoir: "20:24 (4.24m)", coeff: "89-87", conseil: "Magnifique pleine mer matinale pour une derni√®re baignade avant le d√©part." }
            ],
            beaches: [
                { type: 'bassin', name: 'Plage de la Truquette', location: 'Petit Piquey', time: '10 min', icon: 'üë∂', description: 'Calme et discr√®te, id√©ale pour les familles avec ses tables de pique-nique √† l\'ombre des pins.', color: 'bg-sky-100', textColor: 'text-sky-800' },
                { type: 'bassin', name: 'Pointe aux Chevaux', location: 'Grand Piquey', time: '15 min', icon: '‚≠ê', description: 'Consid√©r√©e comme la plus belle plage, avec ses cabanes authentiques et une vue imprenable.', color: 'bg-sky-100', textColor: 'text-sky-800' },
                { type: 'ocean', name: 'Plage du Truc Vert', location: 'For√™t', time: '20-25 min', icon: 'üèÑ', description: 'Cadre sauvage et magnifique, accessible par la for√™t. √âcoles de surf et restauration.', color: 'bg-indigo-100', textColor: 'text-indigo-800' },
                { type: 'ocean', name: 'Plage de l\'Horizon', location: 'Village Cap Ferret', time: '35-45 min', icon: 'üöÇ', description: 'Accessible par le Petit Train. Proche des commerces et restaurants du village.', color: 'bg-indigo-100', textColor: 'text-indigo-800' },
                { type: 'ocean', name: 'Plage du Grand Crohot', location: 'L√®ge', time: '45-55 min', icon: 'üåä', description: 'Tr√®s populaire et vaste. L\'option la plus √©loign√©e √† v√©lo depuis Piraillan.', color: 'bg-indigo-100', textColor: 'text-indigo-800' }
            ],
            activities: {
                "D√©gustations d'Hu√Ætres": [
                    { name: 'La Cabane 57', location: 'Port de Piraillan', description: 'Cadre idyllique avec vue sur l\'√éle aux Oiseaux. Juste √† c√¥t√© de la villa !' },
                    { name: 'Village de l\'Herbe', location: 'L\'Herbe', description: 'Plusieurs cabanes r√©put√©es (Le Ponton, Chez Guillaume...) dans un cadre photog√©nique. Excursion √† v√©lo parfaite.' },
                    { name: 'Chez Boulan', location: 'Village Cap Ferret', description: 'Magnifique jardin face √† la mer, id√©al pour les grands groupes sur r√©servation.' }
                ],
                "Excursions & Visites": [
                    { name: 'Sortie en Bateau', location: 'Bassin d\'Arcachon', description: 'Louez 2 pinasses, un grand semi-rigide ou un catamaran pour tout le groupe. Alternative : navettes UBA depuis Le Canon.' },
                    { name: 'Le Phare du Cap Ferret', location: 'Village Cap Ferret', description: '258 marches pour une vue √† 360¬∞ inoubliable sur toute la presqu\'√Æle.' },
                    { name: 'Le Petit Train', location: 'Village Cap Ferret', description: 'Relie la jet√©e (Bassin) √† la plage de l\'Horizon (Oc√©an). Une attraction charmante pour les enfants.' }
                ]
            },
             practical: {
                "March√©s & Supermarch√©s": [
                    { name: 'March√© de Piraillan', description: 'Le c≈ìur du village. Ouvert tous les matins. Id√©al pour les produits frais.', address: 'Piraillan' },
                    { name: 'Super U Claouey', description: 'Pour le grand ravitaillement d\'arriv√©e. Ouvert le dimanche.', address: 'Avenue des Halles, Claouey' }
                ],
                "Commerces de Bouche": [
                    { name: 'Poissonnerie de Piquey', description: 'Poissons et fruits de mer frais pour vos planchas.', address: '24 rte de Bordeaux, Petit Piquey' },
                    { name: 'Chez Patachou', description: 'P√¢tissier, traiteur, glacier. Pour les petits-d√©jeuners et les desserts.', address: '64 rte de Bordeaux, Petit Piquey' },
                     { name: 'La Casa Pizzeria', description: 'Excellente option pour un d√Æner familial simple √† emporter.', address: '59 rte de Bordeaux, Petit Piquey' }
                ],
                 "Sant√© & Services": [
                    { name: 'Pharmacie de Petit Piquey', description: 'La plus proche pour tous les besoins de sant√©.', address: '45 Route de Bordeaux, Petit Piquey' },
                    { name: 'Pharmacie du Canon', description: 'Une autre option facilement accessible √† v√©lo.', address: '161 route du Cap Ferret, Le Canon' }
                 ]
            }
        };

        let activeTab = 'today';
        const navLinks = document.querySelectorAll('.nav-link');
        const contentSections = document.querySelectorAll('.content-section');
        const todayInfo = document.getElementById('today-info');

        function updateView() {
            contentSections.forEach(section => {
                section.classList.remove('active');
                if (section.id === activeTab) {
                    section.classList.add('active');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.dataset.tab === activeTab) {
                    link.classList.add('active');
                }
            });
        }

        function populateToday() {
            const today = new Date();
            const dayOfWeek = today.getDay(); 
            const todayTide = appData.tides.find(t => t.dayIndex === dayOfWeek);

            if (todayTide) {
                todayInfo.innerHTML = `
                    <p class="text-stone-600 mb-4 text-lg">Aujourd'hui, <strong>${todayTide.date}</strong>.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-center">
                        <div class="bg-sky-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-sky-800">Pleine Mer du Matin</h3>
                            <p class="text-2xl font-bold text-sky-700">${todayTide.pmMatin}</p>
                        </div>
                        <div class="bg-sky-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-sky-800">Pleine Mer de l'Apr√®s-midi</h3>
                            <p class="text-2xl font-bold text-sky-700">${todayTide.pmSoir}</p>
                        </div>
                    </div>
                    <div class="mt-6 bg-amber-50 border-l-4 border-amber-400 p-4 rounded-r-lg">
                        <h4 class="font-bold text-amber-900">Le conseil du jour :</h4>
                        <p class="text-amber-800 mt-1">${todayTide.conseil}</p>
                    </div>
                `;
            } else {
                 todayInfo.innerHTML = `<p class="text-stone-600">Les informations pour aujourd'hui seront disponibles au d√©but de votre s√©jour.</p>`;
            }
        }
        
        function populateVilla() {
            const grid = document.getElementById('villa-grid');
            const villa = appData.villa;
            grid.innerHTML = '';

            const infoCard = document.createElement('div');
            infoCard.className = 'bg-white p-6 rounded-lg shadow-lg border border-stone-200 space-y-4';
            infoCard.innerHTML = `
                <div>
                    <h3 class="font-bold text-xl text-teal-800 mb-2">Informations G√©n√©rales</h3>
                    <p class="font-semibold">${villa.address}</p>
                    <p class="text-sm text-stone-600 mt-2">${villa.description}</p>
                </div>
                <div>
                    <h4 class="font-semibold text-teal-900">Contact Propri√©taire :</h4>
                    <p class="text-stone-700">${villa.contact.name} - ${villa.contact.phone}</p>
                </div>
                <div>
                    <h4 class="font-semibold text-teal-900">R√®gles & Infos Cl√©s :</h4>
                    <ul class="list-disc list-inside text-sm text-stone-700 space-y-1 mt-1">
                        ${villa.rules.map(rule => `<li>${rule}</li>`).join('')}
                    </ul>
                </div>
            `;
            grid.appendChild(infoCard);

            const amenitiesCard = document.createElement('div');
            amenitiesCard.className = 'bg-white p-6 rounded-lg shadow-lg border border-stone-200 space-y-4';
            let amenitiesHtml = '';
            for (const category in villa.amenities) {
                amenitiesHtml += `<div>
                    <h3 class="font-bold text-xl text-teal-800 mb-3">${category}</h3>
                    <div class="flex flex-wrap gap-x-4 gap-y-2 text-sm text-stone-700">
                        ${villa.amenities[category].map(item => `<span class="bg-stone-100 px-2 py-1 rounded-full">${item}</span>`).join('')}
                    </div>
                </div>`;
            }
            amenitiesCard.innerHTML = amenitiesHtml;
            grid.appendChild(amenitiesCard);
        }

        function populateBeaches(filter = 'all') {
            const grid = document.getElementById('beaches-grid');
            grid.innerHTML = '';
            const filteredBeaches = appData.beaches.filter(beach => filter === 'all' || beach.type === filter);
            
            filteredBeaches.forEach(beach => {
                const card = document.createElement('div');
                card.className = `beach-card border rounded-lg p-4 shadow-sm transition-transform hover:scale-105 ${beach.color} ${beach.textColor}`;
                card.innerHTML = `
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="font-bold text-lg">${beach.name}</h3>
                        <span class="text-3xl">${beach.icon}</span>
                    </div>
                    <p class="text-sm font-semibold opacity-80 mb-3">${beach.location} - <span class="font-normal">V√©lo: ~${beach.time}</span></p>
                    <p class="text-sm">${beach.description}</p>
                `;
                grid.appendChild(card);
            });
        }
        
        window.filterBeaches = (filter) => {
             document.querySelectorAll('.beach-filter-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-teal-600', 'text-white');
                btn.classList.add('bg-white', 'text-teal-600');
            });
            const activeBtn = document.querySelector(`.beach-filter-btn[onclick="filterBeaches('${filter}')"]`);
            activeBtn.classList.add('active', 'bg-teal-600', 'text-white');
            activeBtn.classList.remove('bg-white', 'text-teal-600');
            populateBeaches(filter);
        }

        function populateActivities() {
            const grid = document.getElementById('activities-grid');
            grid.innerHTML = '';
            for (const category in appData.activities) {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'bg-white p-6 rounded-lg shadow-lg border border-stone-200';
                let itemsHtml = `<h3 class="font-bold text-xl text-teal-800 mb-4 border-b pb-2">${category}</h3><ul class="space-y-4">`;
                appData.activities[category].forEach(item => {
                    itemsHtml += `
                        <li class="flex items-start gap-3">
                           <span class="text-teal-600 mt-1 font-bold">‚ñ™</span>
                           <div>
                             <h4 class="font-semibold">${item.name}</h4>
                             <p class="text-sm text-stone-600">${item.description}</p>
                           </div>
                        </li>`;
                });
                itemsHtml += '</ul>';
                categoryDiv.innerHTML = itemsHtml;
                grid.appendChild(categoryDiv);
            }
        }
        
        function populatePractical() {
            const grid = document.getElementById('practical-grid');
            grid.innerHTML = '';
            for (const category in appData.practical) {
                 const categoryDiv = document.createElement('div');
                 categoryDiv.className = 'bg-white p-4 rounded-lg shadow-sm border border-stone-200';
                 let itemsHtml = `<h3 class="font-bold text-lg text-teal-800 mb-3">${category}</h3><div class="space-y-3">`;
                 appData.practical[category].forEach(item => {
                    itemsHtml += `
                        <div class="text-sm">
                           <p class="font-semibold">${item.name}</p>
                           <p class="text-stone-600">${item.description}</p>
                           <p class="text-xs text-stone-500">${item.address}</p>
                        </div>`;
                });
                itemsHtml += '</div>';
                categoryDiv.innerHTML = itemsHtml;
                grid.appendChild(categoryDiv);
            }
        }
        
        function populateTidesTable() {
            const tbody = document.getElementById('tides-table-body');
            tbody.innerHTML = '';
            appData.tides.forEach((tide, index) => {
                const row = document.createElement('tr');
                row.className = index % 2 === 0 ? 'bg-white' : 'bg-stone-50';
                row.innerHTML = `
                    <td class="px-4 py-3 font-semibold">${tide.date}</td>
                    <td class="px-4 py-3 text-center">${tide.pmMatin}</td>
                    <td class="px-4 py-3 text-center">${tide.pmSoir}</td>
                    <td class="px-4 py-3 text-center font-bold text-teal-700">${tide.coeff}</td>
                    <td class="px-4 py-3 text-stone-700">${tide.conseil}</td>
                `;
                tbody.appendChild(row);
            });
        }

        function createTidesChart() {
            const ctx = document.getElementById('tidesChart').getContext('2d');
            const labels = appData.tides.map(t => t.date.split(' ')[0] + ' ' + t.date.split(' ')[1]);
            const pmMatinHeights = appData.tides.map(t => parseFloat(t.pmMatin.match(/\((.*?)\m\)/)[1]));
            const pmSoirHeights = appData.tides.map(t => parseFloat(t.pmSoir.match(/\((.*?)\m\)/)[1]));
            const coeffs = appData.tides.map(t => parseInt(t.coeff.split('-')[0]));

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Pleine Mer (m)',
                            data: pmSoirHeights,
                            borderColor: '#0F766E', // teal-700
                            backgroundColor: 'rgba(15, 118, 110, 0.1)',
                            fill: true,
                            tension: 0.3,
                            yAxisID: 'y'
                        },
                        {
                            label: 'Coefficient',
                            data: coeffs,
                            borderColor: '#F97316', // orange-500
                            backgroundColor: 'transparent',
                            borderDash: [5, 5],
                            tension: 0.3,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: { display: true, text: 'Hauteur (m)' },
                             grid: { drawOnChartArea: false }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: { display: true, text: 'Coefficient' },
                             grid: { drawOnChartArea: false }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y;
                                        if(context.dataset.yAxisID === 'y') label += 'm';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    activeTab = link.dataset.tab;
                    updateView();
                });
            });

            populateToday();
            populateVilla();
            populateBeaches();
            populateActivities();
            populatePractical();
            populateTidesTable();
            createTidesChart();
            
            updateView(); // Set initial view
            document.querySelector('.nav-link[data-tab="today"]').classList.add('active');
            document.getElementById('today').classList.add('active');
        });

    </script>
</body>
</html>
